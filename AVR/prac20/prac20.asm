.include "m32def.inc"
LDI R17,0X00;
CBI DDRB,0
LDI R16,0XFF
OUT DDRC,R16
SBI DDRD,0
SBI DDRD,1
SBI DDRD,2
LDI R17,0X38
CALL COMM
LDI R17,0X0E
CALL COMM
LDI R17,0X06
CALL COMM

REP: LDI R17,0X01
	 CALL COMM
	 CALL DELAY
	 SBIS PINB,0
	 JMP ABC
	 LDI ZH,HIGH(DAT1<<1)
	 LDI ZL,LOW(DAT1<<1)
	 JMP XYZ
	 
ABC: LDI ZH,HIGH(DAT2<<1);
	 LDI ZL,LOW(DAT2<<1)

XYZ: LPM R17,Z+
	 CPI R17,0X00
	 BREQ END
	 CALL DATA
	 CALL DELAY
	 JMP XYZ

END: JMP REP
COMM: OUT PORTC,R17
	  CBI PORTD,0
	  CBI PORTD,1
	  SBI PORTD,2
	  CALL DELAY
	  CBI PORTD,2
	  RET

DATA: OUT PORTC,R17
	  SBI PORTD,0
	  CBI PORTD,1
	  SBI PORTD,2
	  CALL DELAY
	  CBI PORTD,2
	  RET

DELAY: LDI R19,0XFF
	REP2:LDI R20,0X58
	REP1:DEC R20
		 BRNE REP1
		 DEC R19
		 BRNE REP2
		 RET

DAT1:
.DB "ELECTRONICS",0

DAT2:
.DB "MICROCONTROLLER",0
