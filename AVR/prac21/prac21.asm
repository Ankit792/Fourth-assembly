.include "m32def.inc"
LDI R16,0X00
OUT DDRB,R16
LDI R16,0XFF
OUT DDRC,R16
LDI R16,LOW(RAMEND)
OUT SPL,R16
LDI R16,HIGH(RAMEND)
OUT SPH,R16

REP: SBIS PINB,0
	 JMP ABC
	 LDI Zh,high(DATA1<<1)
	 LDI Zl,low(DATA1<<1)
PRINT: LPM R18,Z+
	   CPI R18,0X00
	   BREQ END
	   OUT PORTC,R18
	   CALL DELAY
	   CALL DELAY
	   CALL DELAY
	   JMP PRINT
ABC:   LDI Zh,high(DATA2<<1)
	   LDI Zl,low(DATA2<<1)
	   JMP PRINT
END:   JMP REP
DELAY: LDI R19,0XFF
REP2:  LDI R20,0XFF
REP1:  DEC R20
       BRNE REP1
	   DEC R19
	   BRNE REP2
	   RET
DATA1:
.db 0X12,0X46,0X06,0X78,0X00
DATA2:
.db 0X06,0X46,0X00
